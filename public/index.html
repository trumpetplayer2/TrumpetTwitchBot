<html>
    <p id="access_token">If you see this, an error may have occured!</p>
<script>
    const socket = new WebSocket('ws://localhost:8080');
    socket.onopen = () => {
        
        if (document.location.hash) {
            var parsedHash = new URLSearchParams(window.location.hash.substr(1));
            if (parsedHash.get('access_token')) {
                var access_token = parsedHash.get('access_token');
                const data = {
                   type: 'message',
                   Access_Token: access_token
                };
                socket.send(JSON.stringify(data));
                close();
            }
        }
        if(document.location.search){
            console.log(document.location.search);
            var parsedSearch = new URLSearchParams(document.location.search.substr(1));
            if(parsedSearch.get('code')){
                var discord_access_token = parsedSearch.get('code');
                const data = {
                    type: 'message',
                    Discord_Token: discord_access_token
                };
                socket.send(JSON.stringify(data));
                close();
            }
        }
        
    };
    
</script>
</html>